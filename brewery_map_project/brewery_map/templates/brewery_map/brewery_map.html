{% load static tailwind_tags %}
<!DOCTYPE html>
<html>
<head>
    <title>Brewery Map</title>
    {% tailwind_css %}
    <link href="{% static 'styles.css' %}" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?key={{API_KEY}}&callback=initMap" async defer></script>
</head>
<body>

    <div class="py-8 px-8 max-w-sm mx-auto bg-white rounded-xl shadow-lg space-y-2 sm:py-4 sm:flex sm:items-center sm:space-y-0 sm:space-x-6">
        <img class="block mx-auto h-24 rounded-full sm:mx-0 sm:shrink-0" src="/img/erin-lindford.jpg" alt="Woman's Face" />
        <div class="text-center space-y-2 sm:text-left">
          <div class="space-y-0.5">
            <p class="text-lg text-black font-semibold">
              Erin Lindford
            </p>
            <p class="text-slate-500 font-medium">
              Product Engineer
            </p>
          </div>
          <button class="px-4 py-1 text-sm text-purple-600 font-semibold rounded-full border border-purple-200 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2">Message</button>
        </div>
      </div>
    
       
    <div id="map" style="height: 400px;"></div>

    <div class="custom-marker">
        <title>West Town Pub Crawl Rex"</title>
        <h1>Sam and Elisa's favorite spots within walking distance.</h1>
        <h3>Allow us to be your Guide</h3>
        {% for brewery in breweries %}
        <p> brewery </p>
        <p> {{ brewery.title }} </p>
        {% endfor %}

    <script>
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 41.884110, lng: -87.671667 }, // Kaiser Tiger 
                zoom: 77
            });

            // Markers for Breweries
            var breweries = [
                {% for brewery in breweries %}
                {
                    position: { lat: 41.8781, lng: -87.6298 },
                    title: "junk data",
                    address: "junk data",
                    currentHours: "brewery.current_hours",
                    fullHours: "brewery.full_hours"
                },
                {
                    position: { lat: 41.9445, lng: -87.6554  },
                    title: "junk data",
                    address: "junk data",
                    currentHours: "brewery.current_hours",
                    fullHours: "brewery.full_hours"
                },

                {% comment %} {
                    {% comment %} position: { lat: {{ brewery.latitude }}, lng: {{ brewery.longitude }} },
                    title: "{{ brewery.name }}",
                    address: "{{ brewery.address }}",
                    currentHours: "{{ brewery.current_hours }}",
                    fullHours: "{{ brewery.full_hours }}"
                }, {% endcomment %}
                {% endfor %}
            ];

            breweries.forEach(function (brewery) {
                var marker = new google.maps.Marker({
                    position: brewery.position,
                    map: map,
                    title: brewery.title
                });

                var contentString =
                    '<div>' +
                    '<h2>' + brewery.title + '</h2>' +
                    '<p><strong>Address:</strong> <a href="https://www.google.com/maps?q=' + encodeURIComponent(brewery.address) + '" target="_blank">' + brewery.address + '</a></p>' +
                    '<p><strong>Current Hours:</strong> ' + brewery.currentHours + '</p>' +
                    '<p><strong>Full Hours:</strong> ' + brewery.fullHours + '</p>' +
                    '</div>';

                var infowindow = new google.maps.InfoWindow({
                    content: contentString
                });

                marker.addListener('click', function () {
                    infowindow.open(map, marker);
                });
            });
        }
    </script>
</body>
</html>
