<!DOCTYPE html>
<html>
<head>
    <title>Brewery Map</title>
    
 
    <script src="https://maps.googleapis.com/maps/api/js?key={{API_KEY}}&callback=initMap" async defer></script>
</head>
<body>
    <div class="custom-marker">
       
    <div id="map" style="height: 400px;"></div>
    <script>
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 41.884110, lng: -87.671667 }, // Kaiser Tiger 
                zoom: 14
            });

            // Markers for Breweries
            var breweries = [
                {% for brewery in breweries %}
                {
                    position: { lat: 41.8781, lng: -87.6298 },
                    title: "junk data",
                    address: "junk data",
                    currentHours: "brewery.current_hours",
                    fullHours: "brewery.full_hours"
                },
                {
                    position: { lat: 41.9445, lng: -87.6554  },
                    title: "junk data",
                    address: "junk data",
                    currentHours: "brewery.current_hours",
                    fullHours: "brewery.full_hours"
                },

                {% comment %} {
                    {% comment %} position: { lat: {{ brewery.latitude }}, lng: {{ brewery.longitude }} },
                    title: "{{ brewery.name }}",
                    address: "{{ brewery.address }}",
                    currentHours: "{{ brewery.current_hours }}",
                    fullHours: "{{ brewery.full_hours }}"
                }, {% endcomment %}
                {% endfor %}
            ];

            breweries.forEach(function (brewery) {
                var marker = new google.maps.Marker({
                    position: brewery.position,
                    map: map,
                    title: brewery.title
                });

                var contentString =
                    '<div>' +
                    '<h2>' + brewery.title + '</h2>' +
                    '<p><strong>Address:</strong> <a href="https://www.google.com/maps?q=' + encodeURIComponent(brewery.address) + '" target="_blank">' + brewery.address + '</a></p>' +
                    '<p><strong>Current Hours:</strong> ' + brewery.currentHours + '</p>' +
                    '<p><strong>Full Hours:</strong> ' + brewery.fullHours + '</p>' +
                    '</div>';

                var infowindow = new google.maps.InfoWindow({
                    content: contentString
                });

                marker.addListener('click', function () {
                    infowindow.open(map, marker);
                });
            });
        }
    </script>
    <div class="custom-marker">
</body>
</html>
